2025-09-29 14:31:03.912 +03:00 [INF] Executed DbCommand (145ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [MatchFynIdentityDB];
2025-09-29 14:31:03.994 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [MatchFynIdentityDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-09-29 14:31:04.007 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-29 14:31:04.048 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-09-29 14:31:04.050 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-29 14:31:04.060 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-29 14:31:04.065 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-29 14:31:04.074 +03:00 [INF] Applying migration '20250929112723_InitialIdentityCreate'.
2025-09-29 14:31:04.126 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MatchFyn_Roles] (
    [Id] nvarchar(450) NOT NULL,
    [Description] nvarchar(500) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [IsActive] bit NOT NULL DEFAULT CAST(1 AS bit),
    [Priority] int NOT NULL DEFAULT 0,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_MatchFyn_Roles] PRIMARY KEY ([Id])
);
2025-09-29 14:31:04.131 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MatchFyn_Users] (
    [Id] nvarchar(450) NOT NULL,
    [FullName] nvarchar(100) NOT NULL,
    [DateOfBirth] datetime2 NOT NULL,
    [Gender] nvarchar(10) NULL,
    [City] nvarchar(100) NULL,
    [ProfileImageUrl] nvarchar(500) NULL,
    [Bio] nvarchar(1000) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [IsActive] bit NOT NULL DEFAULT CAST(1 AS bit),
    [IsEmailVerified] bit NOT NULL DEFAULT CAST(0 AS bit),
    [IsPhoneVerified] bit NOT NULL DEFAULT CAST(0 AS bit),
    [LastLoginAt] datetime2 NULL,
    [RefreshToken] nvarchar(500) NULL,
    [RefreshTokenExpiryTime] datetime2 NULL,
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(450) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [LockoutEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    CONSTRAINT [PK_MatchFyn_Users] PRIMARY KEY ([Id])
);
2025-09-29 14:31:04.135 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MatchFyn_RoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_MatchFyn_RoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_MatchFyn_RoleClaims_MatchFyn_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [MatchFyn_Roles] ([Id]) ON DELETE CASCADE
);
2025-09-29 14:31:04.139 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MatchFyn_UserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_MatchFyn_UserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_MatchFyn_UserClaims_MatchFyn_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [MatchFyn_Users] ([Id]) ON DELETE CASCADE
);
2025-09-29 14:31:04.144 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MatchFyn_UserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_MatchFyn_UserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_MatchFyn_UserLogins_MatchFyn_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [MatchFyn_Users] ([Id]) ON DELETE CASCADE
);
2025-09-29 14:31:04.147 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MatchFyn_UserRoles] (
    [UserId] nvarchar(450) NOT NULL,
    [RoleId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_MatchFyn_UserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_MatchFyn_UserRoles_MatchFyn_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [MatchFyn_Roles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_MatchFyn_UserRoles_MatchFyn_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [MatchFyn_Users] ([Id]) ON DELETE CASCADE
);
2025-09-29 14:31:04.150 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MatchFyn_UserTokens] (
    [UserId] nvarchar(450) NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_MatchFyn_UserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_MatchFyn_UserTokens_MatchFyn_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [MatchFyn_Users] ([Id]) ON DELETE CASCADE
);
2025-09-29 14:31:04.170 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ConcurrencyStamp', N'CreatedAt', N'Description', N'IsActive', N'Name', N'NormalizedName', N'Priority') AND [object_id] = OBJECT_ID(N'[MatchFyn_Roles]'))
    SET IDENTITY_INSERT [MatchFyn_Roles] ON;
INSERT INTO [MatchFyn_Roles] ([Id], [ConcurrencyStamp], [CreatedAt], [Description], [IsActive], [Name], [NormalizedName], [Priority])
VALUES (N'001e8c78-bb14-4ec7-acc0-235eb7ada4c0', NULL, '2025-09-29T11:27:22.8001875Z', N'Regular user with standard features', CAST(1 AS bit), N'User', N'USER', 80),
(N'139c9928-af89-47e3-b101-714a1ee73dfb', NULL, '2025-09-29T11:27:22.8001879Z', N'Premium user with extended features', CAST(1 AS bit), N'PremiumUser', N'PREMİUMUSER', 70),
(N'2e198ca8-1dbf-4cf6-8e0e-063444b82ad2', NULL, '2025-09-29T11:27:22.8001865Z', N'Content moderator with limited admin access', CAST(1 AS bit), N'Moderator', N'MODERATOR', 90),
(N'82432d0a-8c64-46c3-a1cc-bd66a669ee03', NULL, '2025-09-29T11:27:22.8001857Z', N'System administrator with full access', CAST(1 AS bit), N'Admin', N'ADMİN', 100);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ConcurrencyStamp', N'CreatedAt', N'Description', N'IsActive', N'Name', N'NormalizedName', N'Priority') AND [object_id] = OBJECT_ID(N'[MatchFyn_Roles]'))
    SET IDENTITY_INSERT [MatchFyn_Roles] OFF;
2025-09-29 14:31:04.173 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MatchFyn_RoleClaims_RoleId] ON [MatchFyn_RoleClaims] ([RoleId]);
2025-09-29 14:31:04.176 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApplicationRoles_IsActive] ON [MatchFyn_Roles] ([IsActive]);
2025-09-29 14:31:04.181 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [MatchFyn_Roles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2025-09-29 14:31:04.183 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MatchFyn_UserClaims_UserId] ON [MatchFyn_UserClaims] ([UserId]);
2025-09-29 14:31:04.184 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MatchFyn_UserLogins_UserId] ON [MatchFyn_UserLogins] ([UserId]);
2025-09-29 14:31:04.186 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MatchFyn_UserRoles_RoleId] ON [MatchFyn_UserRoles] ([RoleId]);
2025-09-29 14:31:04.188 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [MatchFyn_Users] ([NormalizedEmail]);
2025-09-29 14:31:04.190 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApplicationUsers_CreatedAt] ON [MatchFyn_Users] ([CreatedAt]);
2025-09-29 14:31:04.192 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApplicationUsers_Email] ON [MatchFyn_Users] ([Email]) WHERE [Email] IS NOT NULL;
2025-09-29 14:31:04.194 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApplicationUsers_IsActive] ON [MatchFyn_Users] ([IsActive]);
2025-09-29 14:31:04.195 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApplicationUsers_PhoneNumber] ON [MatchFyn_Users] ([PhoneNumber]);
2025-09-29 14:31:04.197 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [MatchFyn_Users] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2025-09-29 14:31:04.199 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250929112723_InitialIdentityCreate', N'8.0.0');
2025-09-29 14:42:55.914 +03:00 [INF] Starting MatchFyn API application
2025-09-29 14:42:55.963 +03:00 [INF] User profile is available. Using 'C:\Users\Umut\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-29 14:42:56.095 +03:00 [INF] Now listening on: http://localhost:5218
2025-09-29 14:42:56.097 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-29 14:42:56.098 +03:00 [INF] Hosting environment: Development
2025-09-29 14:42:56.099 +03:00 [INF] Content root path: C:\PROJELER-FLUTTER\MatchFynWebAPI\MatchFynWebAPI
2025-09-29 14:49:17.208 +03:00 [INF] Executed DbCommand (186ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [MatchFynChatDB];
2025-09-29 14:49:17.296 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [MatchFynChatDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-09-29 14:49:17.313 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-29 14:49:17.365 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-09-29 14:49:17.368 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-29 14:49:17.381 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-29 14:49:17.387 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-29 14:49:17.399 +03:00 [INF] Applying migration '20250929114902_InitialChatCreate'.
2025-09-29 14:49:17.463 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Rooms] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [RoomType] nvarchar(20) NOT NULL,
    [Status] nvarchar(20) NOT NULL DEFAULT N'Active',
    [MaxCapacity] int NOT NULL,
    [CurrentParticipants] int NOT NULL,
    [CreatedByUserId] nvarchar(450) NULL,
    [GenderFilter] nvarchar(10) NULL,
    [MinAge] int NULL,
    [MaxAge] int NULL,
    [DurationMinutes] int NULL,
    [ExpiresAt] datetime2 NULL,
    [IsPremium] bit NOT NULL,
    [Price] decimal(18,2) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [IsActive] bit NOT NULL DEFAULT CAST(1 AS bit),
    CONSTRAINT [PK_Rooms] PRIMARY KEY ([Id])
);
2025-09-29 14:49:17.469 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RoomParticipants] (
    [Id] int NOT NULL IDENTITY,
    [RoomId] int NOT NULL,
    [UserId] nvarchar(450) NOT NULL,
    [DisplayName] nvarchar(100) NOT NULL,
    [ProfileImageUrl] nvarchar(500) NULL,
    [Role] nvarchar(20) NOT NULL DEFAULT N'Member',
    [Status] nvarchar(20) NOT NULL DEFAULT N'Online',
    [IsMicrophoneEnabled] bit NOT NULL,
    [IsSpeaking] bit NOT NULL,
    [GridPosition] int NULL,
    [JoinedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [LeftAt] datetime2 NULL,
    [LastActivityAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [TotalTimeMinutes] int NOT NULL,
    [IsActive] bit NOT NULL DEFAULT CAST(1 AS bit),
    [ConnectionId] nvarchar(100) NULL,
    CONSTRAINT [PK_RoomParticipants] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RoomParticipants_Rooms_RoomId] FOREIGN KEY ([RoomId]) REFERENCES [Rooms] ([Id]) ON DELETE CASCADE
);
2025-09-29 14:49:17.474 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [VoiceSessions] (
    [Id] int NOT NULL IDENTITY,
    [RoomId] int NOT NULL,
    [UserId] nvarchar(450) NOT NULL,
    [StartedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [EndedAt] datetime2 NULL,
    [DurationSeconds] int NOT NULL,
    [Status] nvarchar(20) NOT NULL DEFAULT N'Active',
    [AudioQuality] nvarchar(20) NOT NULL DEFAULT N'Medium',
    [IsSpeaking] bit NOT NULL,
    [SpeakingTimeSeconds] int NOT NULL,
    [ActivityLevel] int NOT NULL,
    [ConnectionQuality] int NOT NULL,
    [ConnectionId] nvarchar(100) NULL,
    [PeerConnectionId] nvarchar(100) NULL,
    [LastActivityAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [Metadata] nvarchar(1000) NULL,
    CONSTRAINT [PK_VoiceSessions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_VoiceSessions_Rooms_RoomId] FOREIGN KEY ([RoomId]) REFERENCES [Rooms] ([Id]) ON DELETE CASCADE
);
2025-09-29 14:49:17.479 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Messages] (
    [Id] int NOT NULL IDENTITY,
    [RoomId] int NOT NULL,
    [SenderId] int NOT NULL,
    [Content] nvarchar(1000) NOT NULL,
    [MessageType] nvarchar(20) NOT NULL DEFAULT N'Text',
    [ReplyToMessageId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [IsEdited] bit NOT NULL DEFAULT CAST(0 AS bit),
    [EditedAt] datetime2 NULL,
    [IsDeleted] bit NOT NULL DEFAULT CAST(0 AS bit),
    [DeletedAt] datetime2 NULL,
    CONSTRAINT [PK_Messages] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Messages_Messages_ReplyToMessageId] FOREIGN KEY ([ReplyToMessageId]) REFERENCES [Messages] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Messages_RoomParticipants_SenderId] FOREIGN KEY ([SenderId]) REFERENCES [RoomParticipants] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Messages_Rooms_RoomId] FOREIGN KEY ([RoomId]) REFERENCES [Rooms] ([Id]) ON DELETE CASCADE
);
2025-09-29 14:49:17.483 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [VoiceActivities] (
    [Id] int NOT NULL IDENTITY,
    [VoiceSessionId] int NOT NULL,
    [ActivityType] nvarchar(20) NOT NULL,
    [StartedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [EndedAt] datetime2 NULL,
    [DurationSeconds] int NOT NULL,
    [AudioLevel] int NOT NULL,
    CONSTRAINT [PK_VoiceActivities] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_VoiceActivities_VoiceSessions_VoiceSessionId] FOREIGN KEY ([VoiceSessionId]) REFERENCES [VoiceSessions] ([Id]) ON DELETE CASCADE
);
2025-09-29 14:49:17.488 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MessageReactions] (
    [Id] int NOT NULL IDENTITY,
    [MessageId] int NOT NULL,
    [UserId] nvarchar(450) NOT NULL,
    [ReactionType] nvarchar(20) NOT NULL,
    [Emoji] nvarchar(10) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_MessageReactions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_MessageReactions_Messages_MessageId] FOREIGN KEY ([MessageId]) REFERENCES [Messages] ([Id]) ON DELETE CASCADE
);
2025-09-29 14:49:17.513 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CreatedAt', N'CreatedByUserId', N'CurrentParticipants', N'Description', N'DurationMinutes', N'ExpiresAt', N'GenderFilter', N'IsActive', N'IsPremium', N'MaxAge', N'MaxCapacity', N'MinAge', N'Name', N'Price', N'RoomType', N'Status', N'UpdatedAt') AND [object_id] = OBJECT_ID(N'[Rooms]'))
    SET IDENTITY_INSERT [Rooms] ON;
INSERT INTO [Rooms] ([Id], [CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsActive], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (1, '2025-09-29T11:49:01.9822438Z', NULL, 0, N'Herkese açık genel sohbet odası', NULL, NULL, N'Mixed', CAST(1 AS bit), CAST(0 AS bit), NULL, 20, NULL, N'Genel Sohbet', NULL, N'Public', N'Active', '2025-09-29T11:49:01.9822438Z'),
(2, '2025-09-29T11:49:01.9822442Z', NULL, 0, N'Müzik hakkında sohbet odası', NULL, NULL, N'Mixed', CAST(1 AS bit), CAST(0 AS bit), NULL, 20, NULL, N'Müzik Severler', NULL, N'Public', N'Active', '2025-09-29T11:49:01.9822442Z'),
(3, '2025-09-29T11:49:01.9822445Z', NULL, 0, N'Spor ve fitness hakkında sohbet', NULL, NULL, N'Mixed', CAST(1 AS bit), CAST(0 AS bit), NULL, 20, NULL, N'Spor Konuşmaları', NULL, N'Public', N'Active', '2025-09-29T11:49:01.9822446Z');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CreatedAt', N'CreatedByUserId', N'CurrentParticipants', N'Description', N'DurationMinutes', N'ExpiresAt', N'GenderFilter', N'IsActive', N'IsPremium', N'MaxAge', N'MaxCapacity', N'MinAge', N'Name', N'Price', N'RoomType', N'Status', N'UpdatedAt') AND [object_id] = OBJECT_ID(N'[Rooms]'))
    SET IDENTITY_INSERT [Rooms] OFF;
2025-09-29 14:49:17.517 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_MessageReactions_Message_User_Type] ON [MessageReactions] ([MessageId], [UserId], [ReactionType]);
2025-09-29 14:49:17.519 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_CreatedAt] ON [Messages] ([CreatedAt]);
2025-09-29 14:49:17.521 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_ReplyToMessageId] ON [Messages] ([ReplyToMessageId]);
2025-09-29 14:49:17.523 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_Room_CreatedAt] ON [Messages] ([RoomId], [CreatedAt]);
2025-09-29 14:49:17.525 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_RoomId] ON [Messages] ([RoomId]);
2025-09-29 14:49:17.528 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_SenderId] ON [Messages] ([SenderId]);
2025-09-29 14:49:17.530 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RoomParticipants_IsActive] ON [RoomParticipants] ([IsActive]);
2025-09-29 14:49:17.533 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_RoomParticipants_Room_User] ON [RoomParticipants] ([RoomId], [UserId]);
2025-09-29 14:49:17.535 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RoomParticipants_RoomId] ON [RoomParticipants] ([RoomId]);
2025-09-29 14:49:17.538 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RoomParticipants_UserId] ON [RoomParticipants] ([UserId]);
2025-09-29 14:49:17.542 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Rooms_CreatedAt] ON [Rooms] ([CreatedAt]);
2025-09-29 14:49:17.545 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Rooms_IsActive] ON [Rooms] ([IsActive]);
2025-09-29 14:49:17.548 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Rooms_RoomType] ON [Rooms] ([RoomType]);
2025-09-29 14:49:17.551 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Rooms_Status] ON [Rooms] ([Status]);
2025-09-29 14:49:17.554 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Rooms_Type_Status_Active] ON [Rooms] ([RoomType], [Status], [IsActive]);
2025-09-29 14:49:17.556 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_VoiceActivities_ActivityType] ON [VoiceActivities] ([ActivityType]);
2025-09-29 14:49:17.558 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_VoiceActivities_VoiceSessionId] ON [VoiceActivities] ([VoiceSessionId]);
2025-09-29 14:49:17.560 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_VoiceSessions_RoomId] ON [VoiceSessions] ([RoomId]);
2025-09-29 14:49:17.562 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_VoiceSessions_Status] ON [VoiceSessions] ([Status]);
2025-09-29 14:49:17.564 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_VoiceSessions_UserId] ON [VoiceSessions] ([UserId]);
2025-09-29 14:49:17.566 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250929114902_InitialChatCreate', N'8.0.0');
2025-09-29 15:04:00.289 +03:00 [INF] Starting MatchFyn API application
2025-09-29 15:04:00.339 +03:00 [INF] User profile is available. Using 'C:\Users\Umut\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-29 15:04:00.403 +03:00 [INF] Now listening on: http://localhost:5218
2025-09-29 15:04:00.405 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-29 15:04:00.406 +03:00 [INF] Hosting environment: Development
2025-09-29 15:04:00.407 +03:00 [INF] Content root path: C:\PROJELER-FLUTTER\MatchFynWebAPI\MatchFynWebAPI
2025-09-29 15:05:57.894 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5218/ - null null
2025-09-29 15:05:57.939 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-29 15:05:57.973 +03:00 [INF] HTTP GET / responded 404 in 0.7246 ms
2025-09-29 15:05:57.982 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5218/ - 404 0 null 89.1019ms
2025-09-29 15:05:57.989 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5218/, Response status code: 404
2025-09-29 15:06:03.890 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5218/swagger - null null
2025-09-29 15:06:03.895 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5218/swagger - 301 0 null 5.3279ms
2025-09-29 15:06:03.898 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5218/swagger/index.html - null null
2025-09-29 15:06:03.965 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5218/swagger/index.html - 200 null text/html;charset=utf-8 66.7685ms
2025-09-29 15:06:03.994 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5218/swagger/swagger-ui.css - null null
2025-09-29 15:06:04.000 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5218/swagger/swagger-ui-standalone-preset.js - null null
2025-09-29 15:06:04.000 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5218/swagger/swagger-ui-bundle.js - null null
2025-09-29 15:06:04.022 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-09-29 15:06:04.022 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-09-29 15:06:04.026 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5218/swagger/swagger-ui.css - 200 152034 text/css 31.8579ms
2025-09-29 15:06:04.026 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5218/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 26.5221ms
2025-09-29 15:06:04.036 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-09-29 15:06:04.038 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5218/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 37.9552ms
2025-09-29 15:06:04.384 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5218/swagger/v1/swagger.json - null null
2025-09-29 15:06:04.410 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5218/swagger/favicon-32x32.png - null null
2025-09-29 15:06:04.413 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-09-29 15:06:04.414 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5218/swagger/favicon-32x32.png - 200 628 image/png 3.6851ms
2025-09-29 15:06:04.533 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5218/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 149.0953ms
2025-09-29 15:13:02.394 +03:00 [INF] Starting MatchFyn API application
2025-09-29 15:13:02.437 +03:00 [INF] User profile is available. Using 'C:\Users\Umut\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-29 15:13:02.457 +03:00 [INF] Room Management Background Service started
2025-09-29 15:13:03.389 +03:00 [INF] Now listening on: http://localhost:5218
2025-09-29 15:13:03.390 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-29 15:13:03.391 +03:00 [INF] Hosting environment: Development
2025-09-29 15:13:03.391 +03:00 [INF] Content root path: C:\PROJELER-FLUTTER\MatchFynWebAPI\MatchFynWebAPI
2025-09-29 15:13:03.531 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:13:03.652 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:13:03.720 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:13:03.734 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:13:03.797 +03:00 [INF] Created new waiting room for Male
2025-09-29 15:13:03.801 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:13:03.804 +03:00 [INF] Created new waiting room for Female
2025-09-29 15:13:03.805 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:13:03.807 +03:00 [INF] Created new waiting room for Mixed
2025-09-29 15:13:03.884 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 15:13:03.939 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:13:03.948 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:13:03.950 +03:00 [INF] Created new matching room for Male
2025-09-29 15:13:03.951 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:13:03.953 +03:00 [INF] Created new matching room for Female
2025-09-29 15:13:03.954 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:13:03.956 +03:00 [INF] Created new matching room for Mixed
2025-09-29 15:13:03.958 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 15:14:03.976 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:14:03.982 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:14:03.986 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:14:03.990 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:14:03.992 +03:00 [INF] Created new waiting room for Male
2025-09-29 15:14:03.994 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:14:03.996 +03:00 [INF] Created new waiting room for Female
2025-09-29 15:14:03.998 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:14:04.000 +03:00 [INF] Created new waiting room for Mixed
2025-09-29 15:14:04.007 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 15:14:04.016 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:14:04.023 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:14:04.027 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:14:04.030 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:15:04.049 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:15:04.055 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:15:04.061 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:15:04.065 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:15:04.068 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:15:04.070 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:15:04.075 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:15:04.082 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:15:04.084 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:15:04.085 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:15:04.113 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 15:15:04.120 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:15:04.126 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 15:15:04.127 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 15:15:04.128 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 15:15:04.128 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 15:15:04.129 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 15:15:04.141 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 15:16:04.148 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:16:04.154 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:16:04.157 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:16:04.160 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:16:04.162 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:16:04.164 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:16:04.170 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:16:04.174 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:16:04.176 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:16:04.178 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:17:04.193 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:17:04.198 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:17:04.201 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:17:04.205 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:17:04.207 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:17:04.208 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:17:04.214 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:17:04.219 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:17:04.221 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:17:04.222 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:18:04.228 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:18:04.234 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:18:04.238 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:18:04.241 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:18:04.243 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:18:04.245 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:18:04.251 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:18:04.256 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:18:04.259 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:18:04.260 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:19:04.273 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:19:04.278 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:19:04.282 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:19:04.285 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:19:04.287 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:19:04.290 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:19:04.296 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:19:04.301 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:19:04.303 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:19:04.306 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:20:04.316 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:20:04.321 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:20:04.325 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:20:04.327 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:20:04.329 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:20:04.331 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:20:04.336 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:20:04.341 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:20:04.342 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:20:04.344 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:20:04.355 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 15:20:04.357 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:20:04.359 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 15:20:04.360 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 15:20:04.361 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 15:20:04.362 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 15:20:04.362 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 15:20:04.365 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 15:21:04.377 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:21:04.381 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:21:04.385 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:21:04.388 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:21:04.389 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:21:04.391 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:21:04.397 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:21:04.401 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:21:04.403 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:21:04.405 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:22:04.419 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:22:04.423 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:22:04.426 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:22:04.429 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:22:04.431 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:22:04.433 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:22:04.438 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:22:04.443 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:22:04.445 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:22:04.446 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:23:04.451 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:23:04.455 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:23:04.458 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:23:04.461 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:23:04.463 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:23:04.465 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:23:04.470 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:23:04.475 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:23:04.476 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:23:04.478 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:24:04.483 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:24:04.488 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:24:04.492 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:24:04.495 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:24:04.497 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:24:04.498 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:24:04.503 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:24:04.507 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:24:04.509 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:24:04.511 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:25:04.523 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:25:04.528 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:25:04.532 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:25:04.535 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:25:04.537 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:25:04.539 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:25:04.545 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:25:04.549 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:25:04.552 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:25:04.554 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:25:04.557 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 15:25:04.559 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:25:04.562 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 15:25:04.563 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 15:25:04.563 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 15:25:04.565 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 15:25:04.566 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 15:25:04.574 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 15:26:04.588 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:26:04.594 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:26:04.597 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:26:04.600 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:26:04.602 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:26:04.604 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:26:04.609 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:26:04.613 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:26:04.615 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:26:04.617 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:27:04.629 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:27:04.634 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:27:04.638 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:27:04.641 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:27:04.643 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:27:04.645 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:27:04.651 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:27:04.655 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:27:04.657 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:27:04.659 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:28:04.677 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:28:04.687 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:28:04.689 +03:00 [INF] Expired room cleaned up: 4 (Waiting)
2025-09-29 15:28:04.690 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:28:04.692 +03:00 [INF] Expired room cleaned up: 5 (Waiting)
2025-09-29 15:28:04.693 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:28:04.694 +03:00 [INF] Expired room cleaned up: 6 (Waiting)
2025-09-29 15:28:04.709 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 20), @p2='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (Size = 20), @p6='?' (DbType = DateTime2), @p11='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Rooms] SET [IsActive] = @p0, [Status] = @p1, [UpdatedAt] = @p2
OUTPUT 1
WHERE [Id] = @p3;
UPDATE [Rooms] SET [IsActive] = @p4, [Status] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [Rooms] SET [IsActive] = @p8, [Status] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-09-29 15:28:04.718 +03:00 [INF] Cleaned up 3 expired rooms
2025-09-29 15:28:04.721 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:28:04.725 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:28:04.728 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:28:04.730 +03:00 [INF] Created new waiting room for Male
2025-09-29 15:28:04.731 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:28:04.733 +03:00 [INF] Created new waiting room for Female
2025-09-29 15:28:04.734 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:28:04.735 +03:00 [INF] Created new waiting room for Mixed
2025-09-29 15:28:04.740 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 15:28:04.749 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:28:04.753 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:28:04.755 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:28:04.756 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:29:04.773 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:29:04.777 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:29:04.778 +03:00 [INF] Expired room cleaned up: 10 (Waiting)
2025-09-29 15:29:04.780 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:29:04.781 +03:00 [INF] Expired room cleaned up: 11 (Waiting)
2025-09-29 15:29:04.783 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:29:04.784 +03:00 [INF] Expired room cleaned up: 12 (Waiting)
2025-09-29 15:29:04.790 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 20), @p2='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (Size = 20), @p6='?' (DbType = DateTime2), @p11='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Rooms] SET [IsActive] = @p0, [Status] = @p1, [UpdatedAt] = @p2
OUTPUT 1
WHERE [Id] = @p3;
UPDATE [Rooms] SET [IsActive] = @p4, [Status] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [Rooms] SET [IsActive] = @p8, [Status] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-09-29 15:29:04.796 +03:00 [INF] Cleaned up 3 expired rooms
2025-09-29 15:29:04.799 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:29:04.803 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:29:04.806 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:29:04.808 +03:00 [INF] Created new waiting room for Male
2025-09-29 15:29:04.808 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:29:04.810 +03:00 [INF] Created new waiting room for Female
2025-09-29 15:29:04.811 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:29:04.812 +03:00 [INF] Created new waiting room for Mixed
2025-09-29 15:29:04.818 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 15:29:04.826 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:29:04.831 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:29:04.833 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:29:04.835 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:30:04.851 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:30:04.856 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:30:04.860 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:30:04.863 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:30:04.864 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:30:04.866 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:30:04.871 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:30:04.875 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:30:04.877 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:30:04.879 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:30:04.882 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 15:30:04.884 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:30:04.886 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 15:30:04.888 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 15:30:04.888 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 15:30:04.889 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 15:30:04.890 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 15:30:04.892 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 15:31:04.911 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:31:04.915 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:31:04.919 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:31:04.922 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:31:04.924 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:31:04.926 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:31:04.931 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:31:04.935 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:31:04.937 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:31:04.939 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:32:04.952 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:32:04.963 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:32:04.967 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:32:04.970 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:32:04.971 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:32:04.973 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:32:04.978 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:32:04.983 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:32:04.985 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:32:04.986 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:33:05.001 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:33:05.005 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:33:05.008 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:33:05.012 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:33:05.014 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:33:05.016 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:33:05.021 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:33:05.026 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:33:05.028 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:33:05.030 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:34:05.036 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:34:05.041 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:34:05.045 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:34:05.048 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:34:05.050 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:34:05.052 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:34:05.057 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:34:05.062 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:34:05.063 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:34:05.065 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:35:05.074 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:35:05.078 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:35:05.081 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:35:05.084 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:35:05.086 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:35:05.088 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:35:05.093 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:35:05.097 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:35:05.098 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:35:05.100 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:35:05.103 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 15:35:05.105 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:35:05.107 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 15:35:05.108 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 15:35:05.109 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 15:35:05.109 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 15:35:05.110 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 15:35:05.113 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 15:36:05.116 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:36:05.120 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:36:05.124 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:36:05.127 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:36:05.128 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:36:05.130 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:36:05.135 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:36:05.140 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:36:05.141 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:36:05.143 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:37:05.151 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:37:05.156 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:37:05.159 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:37:05.162 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:37:05.164 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:37:05.165 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:37:05.170 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:37:05.174 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:37:05.176 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:37:05.178 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:38:05.190 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:38:05.194 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:38:05.198 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:38:05.201 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:38:05.203 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:38:05.205 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:38:05.210 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:38:05.214 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:38:05.216 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:38:05.217 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:39:05.228 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:39:05.232 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:39:05.236 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:39:05.239 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:39:05.241 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:39:05.243 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:39:05.250 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:39:05.255 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:39:05.257 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:39:05.259 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:40:05.277 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:40:05.283 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:40:05.286 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:40:05.289 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:40:05.292 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:40:05.293 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:40:05.298 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:40:05.303 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:40:05.304 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:40:05.307 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:40:05.310 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 15:40:05.312 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:40:05.314 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 15:40:05.315 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 15:40:05.316 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 15:40:05.316 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 15:40:05.317 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 15:40:05.319 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 15:41:05.338 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:41:05.343 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:41:05.346 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:41:05.349 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:41:05.350 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:41:05.352 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:41:05.357 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:41:05.361 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:41:05.363 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:41:05.364 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:42:05.369 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:42:05.374 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:42:05.377 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:42:05.380 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:42:05.382 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:42:05.384 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:42:05.389 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:42:05.393 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:42:05.395 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:42:05.397 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:43:05.405 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:43:05.408 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:43:05.410 +03:00 [INF] Expired room cleaned up: 7 (Matching)
2025-09-29 15:43:05.411 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:43:05.413 +03:00 [INF] Expired room cleaned up: 8 (Matching)
2025-09-29 15:43:05.414 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:43:05.415 +03:00 [INF] Expired room cleaned up: 9 (Matching)
2025-09-29 15:43:05.416 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:43:05.418 +03:00 [INF] Expired room cleaned up: 13 (Waiting)
2025-09-29 15:43:05.419 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:43:05.420 +03:00 [INF] Expired room cleaned up: 14 (Waiting)
2025-09-29 15:43:05.421 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:43:05.423 +03:00 [INF] Expired room cleaned up: 15 (Waiting)
2025-09-29 15:43:05.431 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 20), @p2='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (Size = 20), @p6='?' (DbType = DateTime2), @p11='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2), @p15='?' (DbType = Int32), @p12='?' (DbType = Boolean), @p13='?' (Size = 20), @p14='?' (DbType = DateTime2), @p19='?' (DbType = Int32), @p16='?' (DbType = Boolean), @p17='?' (Size = 20), @p18='?' (DbType = DateTime2), @p23='?' (DbType = Int32), @p20='?' (DbType = Boolean), @p21='?' (Size = 20), @p22='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Rooms] SET [IsActive] = @p0, [Status] = @p1, [UpdatedAt] = @p2
OUTPUT 1
WHERE [Id] = @p3;
UPDATE [Rooms] SET [IsActive] = @p4, [Status] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [Rooms] SET [IsActive] = @p8, [Status] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [Id] = @p11;
UPDATE [Rooms] SET [IsActive] = @p12, [Status] = @p13, [UpdatedAt] = @p14
OUTPUT 1
WHERE [Id] = @p15;
UPDATE [Rooms] SET [IsActive] = @p16, [Status] = @p17, [UpdatedAt] = @p18
OUTPUT 1
WHERE [Id] = @p19;
UPDATE [Rooms] SET [IsActive] = @p20, [Status] = @p21, [UpdatedAt] = @p22
OUTPUT 1
WHERE [Id] = @p23;
2025-09-29 15:43:05.439 +03:00 [INF] Cleaned up 6 expired rooms
2025-09-29 15:43:05.442 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:43:05.445 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:43:05.448 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:43:05.450 +03:00 [INF] Created new waiting room for Male
2025-09-29 15:43:05.451 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:43:05.452 +03:00 [INF] Created new waiting room for Female
2025-09-29 15:43:05.453 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:43:05.454 +03:00 [INF] Created new waiting room for Mixed
2025-09-29 15:43:05.459 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 15:43:05.466 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:43:05.471 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:43:05.473 +03:00 [INF] Created new matching room for Male
2025-09-29 15:43:05.474 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:43:05.476 +03:00 [INF] Created new matching room for Female
2025-09-29 15:43:05.477 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:43:05.478 +03:00 [INF] Created new matching room for Mixed
2025-09-29 15:43:05.480 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 15:44:05.496 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:44:05.500 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:44:05.501 +03:00 [INF] Expired room cleaned up: 16 (Waiting)
2025-09-29 15:44:05.502 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:44:05.504 +03:00 [INF] Expired room cleaned up: 17 (Waiting)
2025-09-29 15:44:05.505 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:44:05.506 +03:00 [INF] Expired room cleaned up: 18 (Waiting)
2025-09-29 15:44:05.511 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 20), @p2='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (Size = 20), @p6='?' (DbType = DateTime2), @p11='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Rooms] SET [IsActive] = @p0, [Status] = @p1, [UpdatedAt] = @p2
OUTPUT 1
WHERE [Id] = @p3;
UPDATE [Rooms] SET [IsActive] = @p4, [Status] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [Rooms] SET [IsActive] = @p8, [Status] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-09-29 15:44:05.514 +03:00 [INF] Cleaned up 3 expired rooms
2025-09-29 15:44:05.517 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:44:05.520 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:44:05.523 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:44:05.525 +03:00 [INF] Created new waiting room for Male
2025-09-29 15:44:05.526 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:44:05.527 +03:00 [INF] Created new waiting room for Female
2025-09-29 15:44:05.528 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:44:05.529 +03:00 [INF] Created new waiting room for Mixed
2025-09-29 15:44:05.534 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 15:44:05.543 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:44:05.548 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:44:05.550 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:44:05.552 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:45:05.556 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:45:05.561 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:45:05.565 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:45:05.569 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:45:05.573 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:45:05.577 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:45:05.585 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:45:05.590 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:45:05.593 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:45:05.598 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:45:05.602 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 15:45:05.605 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:45:05.608 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 15:45:05.610 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 15:45:05.611 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 15:45:05.612 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 15:45:05.612 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 15:45:05.615 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 15:46:05.632 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:46:05.637 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:46:05.640 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:46:05.643 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:46:05.645 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:46:05.647 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:46:05.652 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:46:05.656 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:46:05.658 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:46:05.660 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:47:05.671 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:47:05.675 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:47:05.679 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:47:05.681 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:47:05.683 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:47:05.685 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:47:05.691 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:47:05.695 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:47:05.697 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:47:05.699 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:48:05.707 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:48:05.711 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:48:05.715 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:48:05.718 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:48:05.720 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:48:05.722 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:48:05.728 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:48:05.731 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:48:05.733 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:48:05.735 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:49:05.751 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:49:05.755 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:49:05.759 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:49:05.761 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:49:05.763 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:49:05.764 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:49:05.770 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:49:05.775 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:49:05.777 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:49:05.778 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:50:05.788 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:50:05.793 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:50:05.797 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:50:05.801 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:50:05.803 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:50:05.804 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:50:05.810 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:50:05.815 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:50:05.817 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:50:05.818 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:50:05.821 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 15:50:05.824 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:50:05.828 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 15:50:05.829 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 15:50:05.830 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 15:50:05.831 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 15:50:05.831 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 15:50:05.835 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 15:51:05.855 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:51:05.863 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:51:05.869 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:51:05.874 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:51:05.877 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:51:05.880 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:51:05.887 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:51:05.894 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:51:05.898 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:51:05.900 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:52:05.918 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:52:05.925 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:52:05.930 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:52:05.935 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:52:05.940 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:52:05.945 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:52:05.953 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:52:05.960 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:52:05.966 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:52:05.971 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:53:05.978 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:53:05.985 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:53:05.990 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:53:05.994 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:53:05.998 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:53:06.002 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:53:06.010 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:53:06.017 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:53:06.022 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:53:06.026 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:54:06.035 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:54:06.040 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:54:06.051 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:54:06.055 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:54:06.057 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:54:06.059 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:54:06.064 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:54:06.070 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:54:06.072 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:54:06.074 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:55:06.080 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:55:06.086 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:55:06.090 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:55:06.093 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:55:06.095 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:55:06.097 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:55:06.103 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:55:06.108 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:55:06.110 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:55:06.112 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:55:06.115 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 15:55:06.117 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:55:06.120 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 15:55:06.122 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 15:55:06.123 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 15:55:06.124 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 15:55:06.125 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 15:55:06.128 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 15:56:06.135 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:56:06.139 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:56:06.142 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:56:06.145 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:56:06.147 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:56:06.148 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:56:06.154 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:56:06.159 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:56:06.161 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:56:06.163 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:57:06.168 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:57:06.173 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:57:06.177 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:57:06.181 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:57:06.183 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:57:06.185 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:57:06.191 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:57:06.197 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:57:06.199 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:57:06.201 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:58:06.209 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:58:06.213 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:58:06.215 +03:00 [INF] Expired room cleaned up: 19 (Waiting)
2025-09-29 15:58:06.216 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:58:06.217 +03:00 [INF] Expired room cleaned up: 20 (Waiting)
2025-09-29 15:58:06.218 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:58:06.219 +03:00 [INF] Expired room cleaned up: 21 (Waiting)
2025-09-29 15:58:06.225 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 20), @p2='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (Size = 20), @p6='?' (DbType = DateTime2), @p11='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Rooms] SET [IsActive] = @p0, [Status] = @p1, [UpdatedAt] = @p2
OUTPUT 1
WHERE [Id] = @p3;
UPDATE [Rooms] SET [IsActive] = @p4, [Status] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [Rooms] SET [IsActive] = @p8, [Status] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-09-29 15:58:06.228 +03:00 [INF] Cleaned up 3 expired rooms
2025-09-29 15:58:06.232 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:58:06.236 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:58:06.241 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:58:06.243 +03:00 [INF] Created new waiting room for Male
2025-09-29 15:58:06.244 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:58:06.246 +03:00 [INF] Created new waiting room for Female
2025-09-29 15:58:06.247 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:58:06.248 +03:00 [INF] Created new waiting room for Mixed
2025-09-29 15:58:06.255 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 15:58:06.265 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:58:06.270 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:58:06.272 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:58:06.274 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:59:06.286 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 15:59:06.290 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:59:06.292 +03:00 [INF] Expired room cleaned up: 25 (Waiting)
2025-09-29 15:59:06.294 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:59:06.296 +03:00 [INF] Expired room cleaned up: 26 (Waiting)
2025-09-29 15:59:06.297 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 15:59:06.299 +03:00 [INF] Expired room cleaned up: 27 (Waiting)
2025-09-29 15:59:06.305 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 20), @p2='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (Size = 20), @p6='?' (DbType = DateTime2), @p11='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Rooms] SET [IsActive] = @p0, [Status] = @p1, [UpdatedAt] = @p2
OUTPUT 1
WHERE [Id] = @p3;
UPDATE [Rooms] SET [IsActive] = @p4, [Status] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [Rooms] SET [IsActive] = @p8, [Status] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-09-29 15:59:06.307 +03:00 [INF] Cleaned up 3 expired rooms
2025-09-29 15:59:06.311 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 15:59:06.315 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 15:59:06.319 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:59:06.321 +03:00 [INF] Created new waiting room for Male
2025-09-29 15:59:06.322 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:59:06.323 +03:00 [INF] Created new waiting room for Female
2025-09-29 15:59:06.324 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:59:06.326 +03:00 [INF] Created new waiting room for Mixed
2025-09-29 15:59:06.332 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 15:59:06.342 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 15:59:06.348 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:59:06.350 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 15:59:06.352 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:00:06.364 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:00:06.369 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:00:06.373 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:00:06.377 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:00:06.380 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:00:06.382 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:00:06.389 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:00:06.395 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:00:06.397 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:00:06.399 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:00:06.403 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 16:00:06.405 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:00:06.408 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 16:00:06.410 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 16:00:06.410 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 16:00:06.411 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 16:00:06.412 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 16:00:06.414 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 16:01:06.422 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:01:06.427 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:01:06.430 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:01:06.434 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:01:06.437 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:01:06.439 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:01:06.445 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:01:06.450 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:01:06.452 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:01:06.453 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:02:06.473 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:02:06.478 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:02:06.484 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:02:06.488 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:02:06.490 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:02:06.493 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:02:06.500 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:02:06.506 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:02:06.508 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:02:06.510 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:03:06.519 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:03:06.523 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:03:06.526 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:03:06.529 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:03:06.530 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:03:06.532 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:03:06.537 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:03:06.541 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:03:06.543 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:03:06.544 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:04:06.551 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:04:06.555 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:04:06.558 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:04:06.561 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:04:06.563 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:04:06.564 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:04:06.569 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:04:06.573 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:04:06.575 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:04:06.576 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:05:06.593 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:05:06.597 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:05:06.602 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:05:06.606 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:05:06.607 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:05:06.609 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:05:06.615 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:05:06.619 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:05:06.621 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:05:06.623 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:05:06.629 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 16:05:06.631 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:05:06.633 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 16:05:06.634 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 16:05:06.635 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 16:05:06.635 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 16:05:06.635 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 16:05:06.637 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 16:06:06.657 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:06:06.661 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:06:06.664 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:06:06.667 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:06:06.668 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:06:06.670 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:06:06.674 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:06:06.678 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:06:06.679 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:06:06.681 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:07:06.691 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:07:06.695 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:07:06.698 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:07:06.701 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:07:06.702 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:07:06.704 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:07:06.709 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:07:06.712 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:07:06.714 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:07:06.715 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:08:06.718 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:08:06.722 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:08:06.725 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:08:06.728 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:08:06.729 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:08:06.731 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:08:06.736 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:08:06.739 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:08:06.741 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:08:06.742 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:09:06.755 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:09:06.759 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:09:06.762 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:09:06.765 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:09:06.766 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:09:06.767 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:09:06.772 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:09:06.776 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:09:06.777 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:09:06.779 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:10:06.786 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:10:06.790 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:10:06.794 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:10:06.797 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:10:06.799 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:10:06.800 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:10:06.805 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:10:06.809 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:10:06.810 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:10:06.811 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:10:06.814 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 16:10:06.816 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:10:06.818 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 16:10:06.819 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 16:10:06.819 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 16:10:06.820 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 16:10:06.820 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 16:10:06.823 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 16:11:06.840 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:11:06.845 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:11:06.850 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:11:06.853 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:11:06.854 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:11:06.856 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:11:06.861 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:11:06.865 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:11:06.867 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:11:06.869 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:12:06.876 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:12:06.881 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:12:06.884 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:12:06.887 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:12:06.888 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:12:06.889 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:12:06.894 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:12:06.898 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:12:06.899 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:12:06.901 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:13:06.908 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:13:06.913 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:13:06.914 +03:00 [INF] Expired room cleaned up: 22 (Matching)
2025-09-29 16:13:06.915 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:13:06.916 +03:00 [INF] Expired room cleaned up: 23 (Matching)
2025-09-29 16:13:06.917 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:13:06.919 +03:00 [INF] Expired room cleaned up: 24 (Matching)
2025-09-29 16:13:06.920 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:13:06.921 +03:00 [INF] Expired room cleaned up: 28 (Waiting)
2025-09-29 16:13:06.922 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:13:06.923 +03:00 [INF] Expired room cleaned up: 29 (Waiting)
2025-09-29 16:13:06.924 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:13:06.925 +03:00 [INF] Expired room cleaned up: 30 (Waiting)
2025-09-29 16:13:06.933 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 20), @p2='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (Size = 20), @p6='?' (DbType = DateTime2), @p11='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2), @p15='?' (DbType = Int32), @p12='?' (DbType = Boolean), @p13='?' (Size = 20), @p14='?' (DbType = DateTime2), @p19='?' (DbType = Int32), @p16='?' (DbType = Boolean), @p17='?' (Size = 20), @p18='?' (DbType = DateTime2), @p23='?' (DbType = Int32), @p20='?' (DbType = Boolean), @p21='?' (Size = 20), @p22='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Rooms] SET [IsActive] = @p0, [Status] = @p1, [UpdatedAt] = @p2
OUTPUT 1
WHERE [Id] = @p3;
UPDATE [Rooms] SET [IsActive] = @p4, [Status] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [Rooms] SET [IsActive] = @p8, [Status] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [Id] = @p11;
UPDATE [Rooms] SET [IsActive] = @p12, [Status] = @p13, [UpdatedAt] = @p14
OUTPUT 1
WHERE [Id] = @p15;
UPDATE [Rooms] SET [IsActive] = @p16, [Status] = @p17, [UpdatedAt] = @p18
OUTPUT 1
WHERE [Id] = @p19;
UPDATE [Rooms] SET [IsActive] = @p20, [Status] = @p21, [UpdatedAt] = @p22
OUTPUT 1
WHERE [Id] = @p23;
2025-09-29 16:13:06.937 +03:00 [INF] Cleaned up 6 expired rooms
2025-09-29 16:13:06.940 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:13:06.943 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:13:06.946 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:13:06.948 +03:00 [INF] Created new waiting room for Male
2025-09-29 16:13:06.949 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:13:06.950 +03:00 [INF] Created new waiting room for Female
2025-09-29 16:13:06.951 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:13:06.953 +03:00 [INF] Created new waiting room for Mixed
2025-09-29 16:13:06.961 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 16:13:06.971 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:13:06.976 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:13:06.978 +03:00 [INF] Created new matching room for Male
2025-09-29 16:13:06.980 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:13:06.981 +03:00 [INF] Created new matching room for Female
2025-09-29 16:13:06.982 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:13:06.983 +03:00 [INF] Created new matching room for Mixed
2025-09-29 16:13:06.985 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 16:14:07.005 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:14:07.009 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:14:07.010 +03:00 [INF] Expired room cleaned up: 31 (Waiting)
2025-09-29 16:14:07.012 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:14:07.013 +03:00 [INF] Expired room cleaned up: 32 (Waiting)
2025-09-29 16:14:07.016 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:14:07.017 +03:00 [INF] Expired room cleaned up: 33 (Waiting)
2025-09-29 16:14:07.023 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 20), @p2='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (Size = 20), @p6='?' (DbType = DateTime2), @p11='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Rooms] SET [IsActive] = @p0, [Status] = @p1, [UpdatedAt] = @p2
OUTPUT 1
WHERE [Id] = @p3;
UPDATE [Rooms] SET [IsActive] = @p4, [Status] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [Rooms] SET [IsActive] = @p8, [Status] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-09-29 16:14:07.025 +03:00 [INF] Cleaned up 3 expired rooms
2025-09-29 16:14:07.029 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:14:07.032 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:14:07.037 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:14:07.038 +03:00 [INF] Created new waiting room for Male
2025-09-29 16:14:07.040 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:14:07.041 +03:00 [INF] Created new waiting room for Female
2025-09-29 16:14:07.042 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:14:07.044 +03:00 [INF] Created new waiting room for Mixed
2025-09-29 16:14:07.050 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 16:14:07.058 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:14:07.063 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:14:07.065 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:14:07.067 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:15:07.074 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:15:07.079 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:15:07.083 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:15:07.087 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:15:07.089 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:15:07.090 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:15:07.095 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:15:07.100 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:15:07.101 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:15:07.103 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:15:07.106 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 16:15:07.108 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:15:07.110 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 16:15:07.111 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 16:15:07.112 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 16:15:07.112 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 16:15:07.113 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 16:15:07.116 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 16:16:07.130 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:16:07.135 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:16:07.138 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:16:07.141 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:16:07.142 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:16:07.144 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:16:07.149 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:16:07.154 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:16:07.156 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:16:07.157 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:17:07.177 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:17:07.184 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:17:07.189 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:17:07.195 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:17:07.200 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:17:07.202 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:17:07.210 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:17:07.216 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:17:07.218 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:17:07.220 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:18:07.235 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:18:07.239 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:18:07.243 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:18:07.247 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:18:07.249 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:18:07.251 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:18:07.257 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:18:07.263 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:18:07.265 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:18:07.266 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:19:07.274 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:19:07.280 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:19:07.283 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:19:07.287 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:19:07.289 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:19:07.290 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:19:07.297 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:19:07.302 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:19:07.305 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:19:07.307 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:20:07.315 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:20:07.321 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:20:07.326 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:20:07.330 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:20:07.333 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:20:07.335 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:20:07.341 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:20:07.347 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:20:07.349 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:20:07.351 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:20:07.355 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 16:20:07.358 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:20:07.361 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 16:20:07.363 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 16:20:07.363 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 16:20:07.364 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 16:20:07.365 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 16:20:07.368 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 16:21:07.375 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:21:07.379 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:21:07.383 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:21:07.386 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:21:07.390 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:21:07.392 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:21:07.398 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:21:07.403 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:21:07.405 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:21:07.407 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:22:07.422 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:22:07.427 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:22:07.432 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:22:07.435 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:22:07.437 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:22:07.438 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:22:07.444 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:22:07.449 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:22:07.451 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:22:07.453 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:23:07.459 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:23:07.464 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:23:07.468 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:23:07.472 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:23:07.474 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:23:07.475 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:23:07.481 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:23:07.487 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:23:07.488 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:23:07.490 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:24:07.508 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:24:07.513 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:24:07.518 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:24:07.521 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:24:07.522 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:24:07.524 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:24:07.529 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:24:07.534 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:24:07.536 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:24:07.538 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:25:07.544 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:25:07.549 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:25:07.553 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:25:07.556 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:25:07.558 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:25:07.559 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:25:07.565 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:25:07.569 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:25:07.571 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:25:07.573 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:25:07.576 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 16:25:07.578 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:25:07.581 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 16:25:07.582 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 16:25:07.582 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 16:25:07.583 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 16:25:07.583 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 16:25:07.586 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 16:26:07.596 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:26:07.601 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:26:07.604 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:26:07.607 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:26:07.609 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:26:07.610 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:26:07.616 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:26:07.620 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:26:07.621 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:26:07.622 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:27:07.627 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:27:07.632 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:27:07.636 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:27:07.640 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:27:07.642 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:27:07.643 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:27:07.648 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:27:07.652 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:27:07.654 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:27:07.655 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:28:07.659 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:28:07.663 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:28:07.665 +03:00 [INF] Expired room cleaned up: 34 (Waiting)
2025-09-29 16:28:07.666 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:28:07.668 +03:00 [INF] Expired room cleaned up: 35 (Waiting)
2025-09-29 16:28:07.669 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:28:07.671 +03:00 [INF] Expired room cleaned up: 36 (Waiting)
2025-09-29 16:28:07.676 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 20), @p2='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (Size = 20), @p6='?' (DbType = DateTime2), @p11='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Rooms] SET [IsActive] = @p0, [Status] = @p1, [UpdatedAt] = @p2
OUTPUT 1
WHERE [Id] = @p3;
UPDATE [Rooms] SET [IsActive] = @p4, [Status] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [Rooms] SET [IsActive] = @p8, [Status] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-09-29 16:28:07.684 +03:00 [INF] Cleaned up 3 expired rooms
2025-09-29 16:28:07.685 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:28:07.689 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:28:07.691 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:28:07.692 +03:00 [INF] Created new waiting room for Male
2025-09-29 16:28:07.693 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:28:07.695 +03:00 [INF] Created new waiting room for Female
2025-09-29 16:28:07.695 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:28:07.697 +03:00 [INF] Created new waiting room for Mixed
2025-09-29 16:28:07.702 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 16:28:07.707 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:28:07.711 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:28:07.713 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:28:07.715 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:29:07.726 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:29:07.730 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:29:07.732 +03:00 [INF] Expired room cleaned up: 40 (Waiting)
2025-09-29 16:29:07.733 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:29:07.735 +03:00 [INF] Expired room cleaned up: 41 (Waiting)
2025-09-29 16:29:07.736 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:29:07.737 +03:00 [INF] Expired room cleaned up: 42 (Waiting)
2025-09-29 16:29:07.742 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 20), @p2='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (Size = 20), @p6='?' (DbType = DateTime2), @p11='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Rooms] SET [IsActive] = @p0, [Status] = @p1, [UpdatedAt] = @p2
OUTPUT 1
WHERE [Id] = @p3;
UPDATE [Rooms] SET [IsActive] = @p4, [Status] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [Rooms] SET [IsActive] = @p8, [Status] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-09-29 16:29:07.750 +03:00 [INF] Cleaned up 3 expired rooms
2025-09-29 16:29:07.753 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:29:07.756 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:29:07.759 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:29:07.761 +03:00 [INF] Created new waiting room for Male
2025-09-29 16:29:07.761 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:29:07.764 +03:00 [INF] Created new waiting room for Female
2025-09-29 16:29:07.764 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:29:07.766 +03:00 [INF] Created new waiting room for Mixed
2025-09-29 16:29:07.772 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 16:29:07.779 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:29:07.784 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:29:07.786 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:29:07.788 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:30:07.794 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:30:07.801 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:30:07.806 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:30:07.811 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:30:07.814 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:30:07.816 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:30:07.826 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:30:07.833 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:30:07.836 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:30:07.839 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:30:07.844 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 16:30:07.848 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:30:07.853 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 16:30:07.854 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 16:30:07.855 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 16:30:07.856 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 16:30:07.856 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 16:30:07.860 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 16:31:07.877 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:31:07.882 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:31:07.886 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:31:07.889 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:31:07.892 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:31:07.893 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:31:07.900 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:31:07.905 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:31:07.907 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:31:07.910 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:32:07.922 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:32:07.929 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:32:07.935 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:32:07.940 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:32:07.942 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:32:07.944 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:32:07.951 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:32:07.958 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:32:07.960 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:32:07.962 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:33:07.972 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:33:07.979 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:33:07.984 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:33:07.988 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:33:07.991 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:33:07.993 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:33:08.001 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:33:08.008 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:33:08.010 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:33:08.012 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:34:08.020 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:34:08.024 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:34:08.028 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:34:08.032 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:34:08.033 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:34:08.035 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:34:08.041 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:34:08.045 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:34:08.047 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:34:08.049 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:35:08.053 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:35:08.058 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:35:08.063 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:35:08.067 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:35:08.069 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:35:08.070 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:35:08.076 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:35:08.082 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:35:08.083 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:35:08.085 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:35:08.088 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 16:35:08.090 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:35:08.093 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 16:35:08.094 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 16:35:08.095 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 16:35:08.095 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 16:35:08.096 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 16:35:08.099 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 16:36:08.115 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:36:08.120 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:36:08.123 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:36:08.127 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:36:08.129 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:36:08.130 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:36:08.136 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:36:08.141 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:36:08.142 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:36:08.144 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:37:08.160 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:37:08.165 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:37:08.168 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:37:08.171 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:37:08.172 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:37:08.173 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:37:08.178 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:37:08.182 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:37:08.183 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:37:08.184 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:38:08.200 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:38:08.205 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:38:08.208 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:38:08.212 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:38:08.214 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:38:08.215 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:38:08.222 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:38:08.226 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:38:08.228 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:38:08.229 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:39:08.242 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:39:08.246 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:39:08.249 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:39:08.253 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:39:08.255 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:39:08.256 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:39:08.262 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:39:08.266 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:39:08.267 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:39:08.269 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:40:08.282 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:40:08.286 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:40:08.289 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:40:08.292 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:40:08.293 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:40:08.295 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:40:08.300 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:40:08.304 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:40:08.306 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:40:08.307 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:40:08.310 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 16:40:08.312 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:40:08.315 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 16:40:08.315 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 16:40:08.316 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 16:40:08.316 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 16:40:08.317 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 16:40:08.319 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 16:41:08.330 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:41:08.334 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:41:08.344 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:41:08.348 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:41:08.349 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:41:08.351 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:41:08.356 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:41:08.360 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:41:08.362 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:41:08.363 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:42:08.379 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:42:08.384 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:42:08.387 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:42:08.390 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:42:08.392 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:42:08.393 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:42:08.399 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:42:08.403 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:42:08.405 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:42:08.406 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:43:08.418 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:43:08.422 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:43:08.423 +03:00 [INF] Expired room cleaned up: 37 (Matching)
2025-09-29 16:43:08.424 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:43:08.425 +03:00 [INF] Expired room cleaned up: 38 (Matching)
2025-09-29 16:43:08.426 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:43:08.427 +03:00 [INF] Expired room cleaned up: 39 (Matching)
2025-09-29 16:43:08.428 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:43:08.429 +03:00 [INF] Expired room cleaned up: 43 (Waiting)
2025-09-29 16:43:08.430 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:43:08.431 +03:00 [INF] Expired room cleaned up: 44 (Waiting)
2025-09-29 16:43:08.432 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:43:08.433 +03:00 [INF] Expired room cleaned up: 45 (Waiting)
2025-09-29 16:43:08.441 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 20), @p2='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (Size = 20), @p6='?' (DbType = DateTime2), @p11='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2), @p15='?' (DbType = Int32), @p12='?' (DbType = Boolean), @p13='?' (Size = 20), @p14='?' (DbType = DateTime2), @p19='?' (DbType = Int32), @p16='?' (DbType = Boolean), @p17='?' (Size = 20), @p18='?' (DbType = DateTime2), @p23='?' (DbType = Int32), @p20='?' (DbType = Boolean), @p21='?' (Size = 20), @p22='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Rooms] SET [IsActive] = @p0, [Status] = @p1, [UpdatedAt] = @p2
OUTPUT 1
WHERE [Id] = @p3;
UPDATE [Rooms] SET [IsActive] = @p4, [Status] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [Rooms] SET [IsActive] = @p8, [Status] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [Id] = @p11;
UPDATE [Rooms] SET [IsActive] = @p12, [Status] = @p13, [UpdatedAt] = @p14
OUTPUT 1
WHERE [Id] = @p15;
UPDATE [Rooms] SET [IsActive] = @p16, [Status] = @p17, [UpdatedAt] = @p18
OUTPUT 1
WHERE [Id] = @p19;
UPDATE [Rooms] SET [IsActive] = @p20, [Status] = @p21, [UpdatedAt] = @p22
OUTPUT 1
WHERE [Id] = @p23;
2025-09-29 16:43:08.448 +03:00 [INF] Cleaned up 6 expired rooms
2025-09-29 16:43:08.451 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:43:08.455 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:43:08.458 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:43:08.459 +03:00 [INF] Created new waiting room for Male
2025-09-29 16:43:08.460 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:43:08.461 +03:00 [INF] Created new waiting room for Female
2025-09-29 16:43:08.462 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:43:08.463 +03:00 [INF] Created new waiting room for Mixed
2025-09-29 16:43:08.468 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 16:43:08.475 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:43:08.479 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:43:08.480 +03:00 [INF] Created new matching room for Male
2025-09-29 16:43:08.481 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:43:08.482 +03:00 [INF] Created new matching room for Female
2025-09-29 16:43:08.483 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:43:08.484 +03:00 [INF] Created new matching room for Mixed
2025-09-29 16:43:08.485 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 16:44:08.503 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:44:08.508 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:44:08.509 +03:00 [INF] Expired room cleaned up: 46 (Waiting)
2025-09-29 16:44:08.510 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:44:08.511 +03:00 [INF] Expired room cleaned up: 47 (Waiting)
2025-09-29 16:44:08.512 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:44:08.513 +03:00 [INF] Expired room cleaned up: 48 (Waiting)
2025-09-29 16:44:08.520 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 20), @p2='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (Size = 20), @p6='?' (DbType = DateTime2), @p11='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Rooms] SET [IsActive] = @p0, [Status] = @p1, [UpdatedAt] = @p2
OUTPUT 1
WHERE [Id] = @p3;
UPDATE [Rooms] SET [IsActive] = @p4, [Status] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [Rooms] SET [IsActive] = @p8, [Status] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-09-29 16:44:08.522 +03:00 [INF] Cleaned up 3 expired rooms
2025-09-29 16:44:08.526 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:44:08.529 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:44:08.532 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:44:08.533 +03:00 [INF] Created new waiting room for Male
2025-09-29 16:44:08.534 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:44:08.535 +03:00 [INF] Created new waiting room for Female
2025-09-29 16:44:08.536 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:44:08.537 +03:00 [INF] Created new waiting room for Mixed
2025-09-29 16:44:08.541 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 16:44:08.549 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:44:08.553 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:44:08.554 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:44:08.556 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:45:08.567 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:45:08.573 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:45:08.576 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:45:08.580 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:45:08.588 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:45:08.589 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:45:08.594 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:45:08.599 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:45:08.600 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:45:08.601 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:45:08.604 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 16:45:08.606 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:45:08.608 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 16:45:08.609 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 16:45:08.609 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 16:45:08.610 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 16:45:08.610 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 16:45:08.612 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 16:46:08.620 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:46:08.626 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:46:08.630 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:46:08.633 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:46:08.634 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:46:08.636 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:46:08.643 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:46:08.648 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:46:08.649 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:46:08.651 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:47:08.660 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:47:08.664 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:47:08.668 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:47:08.671 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:47:08.673 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:47:08.674 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:47:08.680 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:47:08.685 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:47:08.686 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:47:08.688 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:48:08.695 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:48:08.702 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:48:08.707 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:48:08.712 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:48:08.714 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:48:08.716 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:48:08.724 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:48:08.731 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:48:08.733 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:48:08.735 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:49:08.754 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:49:08.761 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:49:08.766 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:49:08.771 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:49:08.776 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:49:08.778 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:49:08.800 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:49:08.813 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:49:08.816 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:49:08.819 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:50:08.834 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:50:08.840 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:50:08.845 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:50:08.851 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:50:08.854 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:50:08.857 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:50:08.865 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:50:08.870 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:50:08.872 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:50:08.874 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:50:08.877 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 16:50:08.879 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:50:08.881 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 16:50:08.882 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 16:50:08.882 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 16:50:08.882 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 16:50:08.883 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 16:50:08.885 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 16:51:08.889 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:51:08.894 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:51:08.897 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:51:08.900 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:51:08.901 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:51:08.903 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:51:08.908 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:51:08.912 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:51:08.913 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:51:08.915 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:52:08.920 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:52:08.924 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:52:08.929 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:52:08.932 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:52:08.933 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:52:08.934 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:52:08.940 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:52:08.944 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:52:08.945 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:52:08.946 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:53:08.955 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:53:08.960 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:53:08.962 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:53:08.965 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:53:08.967 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:53:08.968 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:53:08.974 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:53:08.978 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:53:08.979 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:53:08.981 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:54:08.989 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:54:08.996 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:54:09.001 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:54:09.006 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:54:09.009 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:54:09.011 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:54:09.017 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:54:09.021 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:54:09.023 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:54:09.025 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:55:09.040 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:55:09.046 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:55:09.049 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:55:09.052 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:55:09.053 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:55:09.055 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:55:09.060 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:55:09.064 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:55:09.065 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:55:09.066 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:55:09.069 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 16:55:09.071 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:55:09.073 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 16:55:09.074 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 16:55:09.075 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 16:55:09.075 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 16:55:09.076 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 16:55:09.078 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 16:55:38.942 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5218/api/Chat/rooms - null null
2025-09-29 16:55:38.974 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-29 16:55:39.001 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-29 16:55:39.004 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-29 16:55:39.010 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5218/api/Chat/rooms - 401 0 null 69.4097ms
2025-09-29 16:56:09.086 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:56:09.091 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:56:09.094 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:56:09.098 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:56:09.100 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:56:09.102 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:56:09.107 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:56:09.112 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:56:09.113 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:56:09.114 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:57:09.129 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:57:09.134 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:57:09.137 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:57:09.140 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:57:09.142 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:57:09.144 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:57:09.150 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:57:09.155 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:57:09.157 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:57:09.158 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:58:09.172 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:58:09.178 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:58:09.179 +03:00 [INF] Expired room cleaned up: 49 (Waiting)
2025-09-29 16:58:09.180 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:58:09.181 +03:00 [INF] Expired room cleaned up: 50 (Waiting)
2025-09-29 16:58:09.182 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:58:09.183 +03:00 [INF] Expired room cleaned up: 51 (Waiting)
2025-09-29 16:58:09.189 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 20), @p2='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (Size = 20), @p6='?' (DbType = DateTime2), @p11='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Rooms] SET [IsActive] = @p0, [Status] = @p1, [UpdatedAt] = @p2
OUTPUT 1
WHERE [Id] = @p3;
UPDATE [Rooms] SET [IsActive] = @p4, [Status] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [Rooms] SET [IsActive] = @p8, [Status] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-09-29 16:58:09.191 +03:00 [INF] Cleaned up 3 expired rooms
2025-09-29 16:58:09.194 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:58:09.197 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:58:09.201 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:58:09.202 +03:00 [INF] Created new waiting room for Male
2025-09-29 16:58:09.203 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:58:09.204 +03:00 [INF] Created new waiting room for Female
2025-09-29 16:58:09.205 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:58:09.207 +03:00 [INF] Created new waiting room for Mixed
2025-09-29 16:58:09.213 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 16:58:09.220 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:58:09.226 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:58:09.228 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:58:09.229 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:59:09.238 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 16:59:09.242 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:59:09.243 +03:00 [INF] Expired room cleaned up: 55 (Waiting)
2025-09-29 16:59:09.247 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:59:09.248 +03:00 [INF] Expired room cleaned up: 56 (Waiting)
2025-09-29 16:59:09.261 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 16:59:09.264 +03:00 [INF] Expired room cleaned up: 57 (Waiting)
2025-09-29 16:59:09.273 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 20), @p2='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (Size = 20), @p6='?' (DbType = DateTime2), @p11='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Rooms] SET [IsActive] = @p0, [Status] = @p1, [UpdatedAt] = @p2
OUTPUT 1
WHERE [Id] = @p3;
UPDATE [Rooms] SET [IsActive] = @p4, [Status] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [Rooms] SET [IsActive] = @p8, [Status] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-09-29 16:59:09.276 +03:00 [INF] Cleaned up 3 expired rooms
2025-09-29 16:59:09.281 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 16:59:09.286 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 16:59:09.291 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:59:09.293 +03:00 [INF] Created new waiting room for Male
2025-09-29 16:59:09.298 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:59:09.300 +03:00 [INF] Created new waiting room for Female
2025-09-29 16:59:09.304 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:59:09.307 +03:00 [INF] Created new waiting room for Mixed
2025-09-29 16:59:09.314 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 16:59:09.326 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 16:59:09.333 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:59:09.338 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 16:59:09.342 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:00:09.359 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 17:00:09.363 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 17:00:09.372 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 17:00:09.375 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:00:09.376 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:00:09.378 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:00:09.382 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 17:00:09.386 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:00:09.387 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:00:09.388 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:00:09.391 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 17:00:09.392 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 17:00:09.394 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 17:00:09.395 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 17:00:09.396 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 17:00:09.396 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 17:00:09.396 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 17:00:09.398 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 17:01:09.415 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 17:01:09.421 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 17:01:09.424 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 17:01:09.426 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:01:09.428 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:01:09.429 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:01:09.433 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 17:01:09.437 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:01:09.438 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:01:09.439 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:02:09.456 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 17:02:09.460 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 17:02:09.464 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 17:02:09.467 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:02:09.468 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:02:09.469 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:02:09.474 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 17:02:09.478 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:02:09.479 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:02:09.480 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:03:09.494 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 17:03:09.498 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 17:03:09.501 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 17:03:09.505 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:03:09.506 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:03:09.508 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:03:09.512 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 17:03:09.516 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:03:09.517 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:03:09.519 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:04:09.528 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 17:04:09.532 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 17:04:09.536 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 17:04:09.538 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:04:09.540 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:04:09.541 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:04:09.546 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 17:04:09.550 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:04:09.551 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:04:09.552 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:05:09.565 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 17:05:09.570 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 17:05:09.573 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 17:05:09.576 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:05:09.578 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:05:09.579 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:05:09.584 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 17:05:09.587 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:05:09.589 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:05:09.590 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:05:09.592 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 17:05:09.594 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 17:05:09.596 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 17:05:09.597 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 17:05:09.597 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 17:05:09.598 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 17:05:09.598 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 17:05:09.600 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 17:06:09.615 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 17:06:09.620 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 17:06:09.622 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 17:06:09.625 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:06:09.626 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:06:09.627 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:06:09.632 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 17:06:09.635 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:06:09.636 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:06:09.637 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:07:09.644 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 17:07:09.648 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 17:07:09.651 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 17:07:09.654 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:07:09.655 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:07:09.656 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:07:09.661 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 17:07:09.664 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:07:09.666 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:07:09.667 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:08:09.672 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 17:08:09.677 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 17:08:09.679 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 17:08:09.682 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:08:09.683 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:08:09.684 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:08:09.689 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 17:08:09.692 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:08:09.694 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:08:09.695 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:09:09.707 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 17:09:09.713 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 17:09:09.716 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 17:09:09.718 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:09:09.719 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:09:09.721 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:09:09.725 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 17:09:09.729 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:09:09.730 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:09:09.731 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:10:09.748 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 17:10:09.751 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 17:10:09.753 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 17:10:09.755 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:10:09.756 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:10:09.758 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:10:09.759 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 17:10:09.761 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:10:09.762 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:10:09.763 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:10:09.766 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 17:10:09.768 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 17:10:09.770 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 17:10:09.771 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 17:10:09.771 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 17:10:09.772 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 17:10:09.772 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 17:10:09.774 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 17:11:09.788 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 17:11:09.792 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 17:11:09.795 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 17:11:09.798 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:11:09.800 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:11:09.802 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:11:09.807 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 17:11:09.810 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:11:09.812 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:11:09.813 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:12:09.829 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 17:12:09.832 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 17:12:09.835 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 17:12:09.838 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:12:09.840 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:12:09.841 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:12:09.846 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 17:12:09.851 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:12:09.852 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:12:09.854 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:13:09.863 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 17:13:09.867 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 17:13:09.868 +03:00 [INF] Expired room cleaned up: 52 (Matching)
2025-09-29 17:13:09.869 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 17:13:09.871 +03:00 [INF] Expired room cleaned up: 53 (Matching)
2025-09-29 17:13:09.872 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 17:13:09.873 +03:00 [INF] Expired room cleaned up: 54 (Matching)
2025-09-29 17:13:09.874 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 17:13:09.876 +03:00 [INF] Expired room cleaned up: 58 (Waiting)
2025-09-29 17:13:09.877 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 17:13:09.878 +03:00 [INF] Expired room cleaned up: 59 (Waiting)
2025-09-29 17:13:09.880 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 17:13:09.881 +03:00 [INF] Expired room cleaned up: 60 (Waiting)
2025-09-29 17:13:09.891 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 20), @p2='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (Size = 20), @p6='?' (DbType = DateTime2), @p11='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2), @p15='?' (DbType = Int32), @p12='?' (DbType = Boolean), @p13='?' (Size = 20), @p14='?' (DbType = DateTime2), @p19='?' (DbType = Int32), @p16='?' (DbType = Boolean), @p17='?' (Size = 20), @p18='?' (DbType = DateTime2), @p23='?' (DbType = Int32), @p20='?' (DbType = Boolean), @p21='?' (Size = 20), @p22='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Rooms] SET [IsActive] = @p0, [Status] = @p1, [UpdatedAt] = @p2
OUTPUT 1
WHERE [Id] = @p3;
UPDATE [Rooms] SET [IsActive] = @p4, [Status] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [Rooms] SET [IsActive] = @p8, [Status] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [Id] = @p11;
UPDATE [Rooms] SET [IsActive] = @p12, [Status] = @p13, [UpdatedAt] = @p14
OUTPUT 1
WHERE [Id] = @p15;
UPDATE [Rooms] SET [IsActive] = @p16, [Status] = @p17, [UpdatedAt] = @p18
OUTPUT 1
WHERE [Id] = @p19;
UPDATE [Rooms] SET [IsActive] = @p20, [Status] = @p21, [UpdatedAt] = @p22
OUTPUT 1
WHERE [Id] = @p23;
2025-09-29 17:13:09.894 +03:00 [INF] Cleaned up 6 expired rooms
2025-09-29 17:13:09.897 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 17:13:09.901 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 17:13:09.905 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:13:09.907 +03:00 [INF] Created new waiting room for Male
2025-09-29 17:13:09.907 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:13:09.909 +03:00 [INF] Created new waiting room for Female
2025-09-29 17:13:09.910 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:13:09.911 +03:00 [INF] Created new waiting room for Mixed
2025-09-29 17:13:09.918 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 17:13:09.926 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 17:13:09.930 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:13:09.931 +03:00 [INF] Created new matching room for Male
2025-09-29 17:13:09.932 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:13:09.933 +03:00 [INF] Created new matching room for Female
2025-09-29 17:13:09.934 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:13:09.936 +03:00 [INF] Created new matching room for Mixed
2025-09-29 17:13:09.937 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 17:14:09.957 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 17:14:09.962 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 17:14:09.964 +03:00 [INF] Expired room cleaned up: 61 (Waiting)
2025-09-29 17:14:09.966 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 17:14:09.968 +03:00 [INF] Expired room cleaned up: 62 (Waiting)
2025-09-29 17:14:09.970 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__room_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId]
FROM [RoomParticipants] AS [r]
WHERE [r].[RoomId] = @__room_Id_0 AND [r].[IsActive] = CAST(1 AS bit)
2025-09-29 17:14:09.971 +03:00 [INF] Expired room cleaned up: 63 (Waiting)
2025-09-29 17:14:09.979 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 20), @p2='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (Size = 20), @p6='?' (DbType = DateTime2), @p11='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Rooms] SET [IsActive] = @p0, [Status] = @p1, [UpdatedAt] = @p2
OUTPUT 1
WHERE [Id] = @p3;
UPDATE [Rooms] SET [IsActive] = @p4, [Status] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [Rooms] SET [IsActive] = @p8, [Status] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-09-29 17:14:09.982 +03:00 [INF] Cleaned up 3 expired rooms
2025-09-29 17:14:09.987 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 17:14:09.992 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 17:14:09.996 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:14:09.999 +03:00 [INF] Created new waiting room for Male
2025-09-29 17:14:10.000 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:14:10.002 +03:00 [INF] Created new waiting room for Female
2025-09-29 17:14:10.004 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:14:10.005 +03:00 [INF] Created new waiting room for Mixed
2025-09-29 17:14:10.014 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 10), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 20), @p14='?' (Size = 20), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = Int32), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 10), @p23='?' (DbType = Boolean), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 100), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 20), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 450), @p34='?' (DbType = Int32), @p35='?' (Size = 500), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 10), @p39='?' (DbType = Boolean), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Size = 100), @p44='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p45='?' (Size = 20), @p46='?' (Size = 20), @p47='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 0),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 2)) AS i ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedByUserId], [CurrentParticipants], [Description], [DurationMinutes], [ExpiresAt], [GenderFilter], [IsPremium], [MaxAge], [MaxCapacity], [MinAge], [Name], [Price], [RoomType], [Status], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedByUserId], i.[CurrentParticipants], i.[Description], i.[DurationMinutes], i.[ExpiresAt], i.[GenderFilter], i.[IsPremium], i.[MaxAge], i.[MaxCapacity], i.[MinAge], i.[Name], i.[Price], i.[RoomType], i.[Status], i.[UpdatedAt])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-09-29 17:14:10.023 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 17:14:10.029 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:14:10.032 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:14:10.034 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:15:10.053 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 17:15:10.064 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 17:15:10.072 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 17:15:10.083 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:15:10.093 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:15:10.103 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:15:10.129 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 17:15:10.142 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:15:10.153 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:15:10.162 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:15:10.171 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomType], COUNT(*) AS [Count]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
GROUP BY [r].[RoomType]
2025-09-29 17:15:10.176 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [RoomParticipants] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit)
2025-09-29 17:15:10.184 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[Status] = N'Active'
2025-09-29 17:15:10.186 +03:00 [INF] Room Health Check - Active Rooms: 12, Active Participants: 0
2025-09-29 17:15:10.187 +03:00 [INF] Room Type: Matching, Count: 3
2025-09-29 17:15:10.188 +03:00 [INF] Room Type: Public, Count: 3
2025-09-29 17:15:10.189 +03:00 [INF] Room Type: Waiting, Count: 6
2025-09-29 17:15:10.195 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[CurrentParticipants] = 0 AND [r].[UpdatedAt] < DATEADD(minute, CAST(-30.0E0 AS int), GETUTCDATE()) AND [r].[RoomType] <> N'Public'
2025-09-29 17:16:10.215 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 17:16:10.231 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 17:16:10.245 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 17:16:10.266 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:16:10.280 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:16:10.295 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:16:10.312 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 17:16:10.323 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:16:10.334 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:16:10.344 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:17:10.353 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt]
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[ExpiresAt] IS NOT NULL AND [r].[ExpiresAt] <= GETUTCDATE() AND [r].[RoomType] IN (N'Waiting', N'Matching')
2025-09-29 17:17:10.358 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__inactiveThreshold_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConnectionId], [r].[DisplayName], [r].[GridPosition], [r].[IsActive], [r].[IsMicrophoneEnabled], [r].[IsSpeaking], [r].[JoinedAt], [r].[LastActivityAt], [r].[LeftAt], [r].[ProfileImageUrl], [r].[Role], [r].[RoomId], [r].[Status], [r].[TotalTimeMinutes], [r].[UserId], [r0].[Id], [r0].[CreatedAt], [r0].[CreatedByUserId], [r0].[CurrentParticipants], [r0].[Description], [r0].[DurationMinutes], [r0].[ExpiresAt], [r0].[GenderFilter], [r0].[IsActive], [r0].[IsPremium], [r0].[MaxAge], [r0].[MaxCapacity], [r0].[MinAge], [r0].[Name], [r0].[Price], [r0].[RoomType], [r0].[Status], [r0].[UpdatedAt]
FROM [RoomParticipants] AS [r]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomId] = [r0].[Id]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[LastActivityAt] < @__inactiveThreshold_0 AND [r].[Status] <> N'Offline'
2025-09-29 17:17:10.362 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active'
2025-09-29 17:17:10.364 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:17:10.367 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:17:10.370 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:17:10.374 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedByUserId], [r].[CurrentParticipants], [r].[Description], [r].[DurationMinutes], [r].[ExpiresAt], [r].[GenderFilter], [r].[IsActive], [r].[IsPremium], [r].[MaxAge], [r].[MaxCapacity], [r].[MinAge], [r].[Name], [r].[Price], [r].[RoomType], [r].[Status], [r].[UpdatedAt], [t].[Id], [t].[ConnectionId], [t].[DisplayName], [t].[GridPosition], [t].[IsActive], [t].[IsMicrophoneEnabled], [t].[IsSpeaking], [t].[JoinedAt], [t].[LastActivityAt], [t].[LeftAt], [t].[ProfileImageUrl], [t].[Role], [t].[RoomId], [t].[Status], [t].[TotalTimeMinutes], [t].[UserId]
FROM [Rooms] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[ConnectionId], [r0].[DisplayName], [r0].[GridPosition], [r0].[IsActive], [r0].[IsMicrophoneEnabled], [r0].[IsSpeaking], [r0].[JoinedAt], [r0].[LastActivityAt], [r0].[LeftAt], [r0].[ProfileImageUrl], [r0].[Role], [r0].[RoomId], [r0].[Status], [r0].[TotalTimeMinutes], [r0].[UserId]
    FROM [RoomParticipants] AS [r0]
    WHERE [r0].[IsActive] = CAST(1 AS bit)
) AS [t] ON [r].[Id] = [t].[RoomId]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Waiting' AND [r].[Status] = N'Active' AND [r].[CurrentParticipants] >= [r].[MaxCapacity]
ORDER BY [r].[Id]
2025-09-29 17:17:10.380 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:17:10.383 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
2025-09-29 17:17:10.385 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gender_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Rooms] AS [r]
WHERE [r].[IsActive] = CAST(1 AS bit) AND [r].[RoomType] = N'Matching' AND [r].[GenderFilter] = @__gender_0 AND [r].[Status] = N'Active'
